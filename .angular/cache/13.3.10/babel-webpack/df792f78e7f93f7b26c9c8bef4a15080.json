{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\dsalgado.contr\\\\source\\\\Workspaces\\\\CAIU-LIBRARY\\\\CAIU-LIBRARY\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";\nimport _createClass from \"C:\\\\Users\\\\dsalgado.contr\\\\source\\\\Workspaces\\\\CAIU-LIBRARY\\\\CAIU-LIBRARY\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __metadata = this && this.__metadata || function (k, v) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\nimport { Actions, Effect, ofType } from '@ngrx/effects';\nimport { of } from 'rxjs';\nimport { map, mergeMap, catchError } from 'rxjs/operators';\nimport { HttpActions } from './http.actions';\nimport { HttpCommands } from './http.commands';\nimport { Error } from '../errors/errors.models';\nimport { build } from '../shared/utils';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/effects\";\nimport * as i2 from \"./http.commands\";\nexport var HttpEffects = /*#__PURE__*/function () {\n  function HttpEffects(actions$, commands) {\n    var _this = this;\n\n    _classCallCheck(this, HttpEffects);\n\n    this.actions$ = actions$;\n    this.commands = commands;\n    this.onDelete$ = this.actions$.pipe(ofType(HttpActions.DELETE), mergeMap(function (action) {\n      return _this.delete$(action.payload);\n    }));\n    this.onGet$ = this.actions$.pipe(ofType(HttpActions.GET), mergeMap(function (action) {\n      return _this.get$(action.payload);\n    }));\n    this.onPost$ = this.actions$.pipe(ofType(HttpActions.POST), mergeMap(function (action) {\n      return _this.post$(action.payload);\n    }));\n    this.onPostFormUrlEncoded$ = this.actions$.pipe(ofType(HttpActions.POST_FORM_URL_ENCODED), mergeMap(function (action) {\n      return _this.postFormUrlEncoded$(action.payload);\n    }));\n    this.onPut$ = this.actions$.pipe(ofType(HttpActions.PUT), mergeMap(function (action) {\n      return _this.put$(action.payload);\n    }));\n    this.onSearch$ = this.actions$.pipe(ofType(HttpActions.SEARCH), mergeMap(function (action) {\n      return _this.search$(action.payload);\n    }));\n  }\n\n  _createClass(HttpEffects, [{\n    key: \"delete$\",\n    value: function delete$(payload) {\n      // console.log('DELETE:\\t', payload.onSuccess);\n      return this.commands.delete$(payload).pipe(map(function (model) {\n        return HttpActions.deleteSuccess(payload.data || model, payload.onSuccess);\n      }), catchError(function (e) {\n        return of(HttpActions.deleteError(build(Error, e, {\n          data: payload.data\n        }), payload.onError));\n      }));\n    }\n  }, {\n    key: \"get$\",\n    value: function get$(payload) {\n      // console.log('GET:\\t', payload.onSuccess);\n      return this.commands.get$(payload).pipe(map(function (model) {\n        return HttpActions.getSuccess(model, payload.onSuccess);\n      }), catchError(function (e) {\n        return of(HttpActions.getError(e, payload.onError));\n      }));\n    }\n  }, {\n    key: \"post$\",\n    value: function post$(payload) {\n      // console.log('POST:\\t', payload.onSuccess);\n      return this.commands.post$(payload).pipe(map(function (model) {\n        return HttpActions.postSuccess(model, payload.onSuccess);\n      }), catchError(function (e) {\n        return of(HttpActions.postError(e, payload.onError));\n      }));\n    }\n  }, {\n    key: \"postFormUrlEncoded$\",\n    value: function postFormUrlEncoded$(payload) {\n      // console.log('POST:\\t', payload.onSuccess);\n      return this.commands.postFormUrlEncoded$(payload).pipe(map(function (model) {\n        return HttpActions.postSuccess(model, payload.onSuccess);\n      }), catchError(function (e) {\n        return of(HttpActions.postError(e, payload.onError));\n      }));\n    }\n  }, {\n    key: \"put$\",\n    value: function put$(payload) {\n      // console.log('PUT:\\t', payload.onSuccess);\n      return this.commands.put$(payload).pipe(map(function (model) {\n        return HttpActions.putSuccess(model, payload.onSuccess);\n      }), catchError(function (e) {\n        return of(HttpActions.putError(e, payload.onError));\n      }));\n    }\n  }, {\n    key: \"search$\",\n    value: function search$(payload) {\n      // console.log('SEARCH:\\t', payload.onSuccess);\n      return this.commands.get$(payload).pipe(map(function (model) {\n        return HttpActions.searchSuccess(model, payload.onSuccess, payload.path);\n      }), catchError(function (e) {\n        return of(HttpActions.getError(e, payload.onError));\n      }));\n    }\n  }]);\n\n  return HttpEffects;\n}();\n\nHttpEffects.ɵfac = function HttpEffects_Factory(t) {\n  return new (t || HttpEffects)(i0.ɵɵinject(i1.Actions), i0.ɵɵinject(i2.HttpCommands));\n};\n\nHttpEffects.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: HttpEffects,\n  factory: HttpEffects.ɵfac\n});\n\n__decorate([Effect(), __metadata(\"design:type\", Object)], HttpEffects.prototype, \"onDelete$\", void 0);\n\n__decorate([Effect(), __metadata(\"design:type\", Object)], HttpEffects.prototype, \"onGet$\", void 0);\n\n__decorate([Effect(), __metadata(\"design:type\", Object)], HttpEffects.prototype, \"onPost$\", void 0);\n\n__decorate([Effect(), __metadata(\"design:type\", Object)], HttpEffects.prototype, \"onPostFormUrlEncoded$\", void 0);\n\n__decorate([Effect(), __metadata(\"design:type\", Object)], HttpEffects.prototype, \"onPut$\", void 0);\n\n__decorate([Effect(), __metadata(\"design:type\", Object)], HttpEffects.prototype, \"onSearch$\", void 0);","map":null,"metadata":{},"sourceType":"module"}