{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\dsalgado.contr\\\\source\\\\Workspaces\\\\CAIU-LIBRARY\\\\CAIU-LIBRARY\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";\nimport _createClass from \"C:\\\\Users\\\\dsalgado.contr\\\\source\\\\Workspaces\\\\CAIU-LIBRARY\\\\CAIU-LIBRARY\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";\nimport _inherits from \"C:\\\\Users\\\\dsalgado.contr\\\\source\\\\Workspaces\\\\CAIU-LIBRARY\\\\CAIU-LIBRARY\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\inherits.js\";\nimport _createSuper from \"C:\\\\Users\\\\dsalgado.contr\\\\source\\\\Workspaces\\\\CAIU-LIBRARY\\\\CAIU-LIBRARY\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createSuper.js\";\nimport { EventEmitter } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\nimport { distinctUntilChanged } from 'rxjs/operators';\nimport { Timer } from './timer.model';\nimport { DumbComponent } from '../../shared/component';\nimport { build } from '../../shared/utils';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/material/button\";\nimport * as i3 from \"./timer.pipe\";\n\nfunction TimerComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"timer\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind3(2, 1, ctx_r0.timeRemaining, ctx_r0.showHours, ctx_r0.showRemainingMilliseconds), \" \");\n  }\n}\n\nfunction TimerComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"timer\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind3(2, 1, ctx_r1.timeElapsed, ctx_r1.showHours, ctx_r1.showElapsedMilliseconds), \" \");\n  }\n}\n\nexport var TimerComponent = /*#__PURE__*/(function () {\n  var TimerComponent = /*#__PURE__*/function (_DumbComponent) {\n    _inherits(TimerComponent, _DumbComponent);\n\n    var _super = _createSuper(TimerComponent);\n\n    function TimerComponent() {\n      var _this;\n\n      _classCallCheck(this, TimerComponent);\n\n      _this = _super.call(this);\n      _this.countUp = false;\n      _this.millisecondsAlways = false;\n      _this.millisecondsUnderMinute = false;\n      _this.showHours = false;\n      _this.timesUp = new EventEmitter();\n      _this.stopped = false;\n      _this.timeElapsed = new Timer();\n      _this.timeElapsedSubject = new BehaviorSubject(new Timer());\n      _this.timeRemaining = new Timer();\n      _this.timeRemainingSubject = new BehaviorSubject(new Timer());\n      _this._countDown = false;\n      _this._countdownFrom = new Timer();\n      _this.timeElapsed$ = _this.timeElapsedSubject.asObservable().pipe(distinctUntilChanged(Timer.Equals));\n      _this.timeRemaining$ = _this.timeRemainingSubject.asObservable().pipe(distinctUntilChanged(Timer.Equals));\n      return _this;\n    }\n\n    _createClass(TimerComponent, [{\n      key: \"countdownFrom\",\n      get: function get() {\n        return this._countdownFrom;\n      },\n      set: function set(value) {\n        this._countdownFrom = build(Timer, value);\n        this.timeRemainingSubject.next(this._countdownFrom);\n      }\n    }, {\n      key: \"countDown\",\n      get: function get() {\n        return this._countDown || !this.countdownFrom.zero;\n      },\n      set: function set(value) {\n        this._countDown = value;\n      }\n    }, {\n      key: \"millisecondsEver\",\n      get: function get() {\n        return this.millisecondsAlways || this.millisecondsUnderMinute;\n      }\n    }, {\n      key: \"showElapsedMilliseconds\",\n      get: function get() {\n        return this.millisecondsAlways ? true : this.millisecondsUnderMinute && this.timeElapsed.minutes < 1;\n      }\n    }, {\n      key: \"showRemainingMilliseconds\",\n      get: function get() {\n        return this.millisecondsAlways ? true : this.millisecondsUnderMinute && this.timeRemaining.minutes < 1;\n      }\n    }, {\n      key: \"timeElapsedChanges\",\n      get: function get() {\n        var _this2 = this;\n\n        return this.timeElapsed$.subscribe(function (x) {\n          _this2.timeElapsed = x;\n        });\n      }\n    }, {\n      key: \"timeRemainingChanges\",\n      get: function get() {\n        var _this3 = this;\n\n        return this.timeRemaining$.subscribe(function (x) {\n          _this3.timeRemaining = x;\n\n          if (_this3.timeRemaining.zero) {\n            _this3.timesUp.emit();\n          }\n        });\n      }\n    }, {\n      key: \"zero\",\n      get: function get() {\n        return this.timeRemaining.zero;\n      }\n    }, {\n      key: \"ngOnInit\",\n      value: function ngOnInit() {\n        this.subscribe([this.timeElapsedChanges, this.timeRemainingChanges]);\n      }\n    }, {\n      key: \"setTimeElapsed\",\n      value: function setTimeElapsed(time) {\n        this.stopped = true;\n        this.timeElapsedSubject.next(build(Timer, time));\n      }\n    }, {\n      key: \"setTimeRemaining\",\n      value: function setTimeRemaining(time) {\n        // this.stopped = true;\n        this.timeRemainingSubject.next(build(Timer, time));\n      }\n    }, {\n      key: \"start\",\n      value: function start(e) {\n        if (e && typeof e.preventDefault === 'function') {\n          e.preventDefault();\n        }\n\n        this.stopped = false;\n\n        if (this.millisecondsEver) {\n          this.timeoutMilliseconds();\n        } else {\n          this.timeoutSeconds();\n        }\n      }\n    }, {\n      key: \"startAt\",\n      value: function startAt(time) {\n        this.setTimeRemaining(time); // this.start();\n      }\n    }, {\n      key: \"stop\",\n      value: function stop(e) {\n        if (e && typeof e.preventDefault === 'function') {\n          e.preventDefault();\n        }\n\n        this.stopped = true;\n      }\n    }, {\n      key: \"timeoutMilliseconds\",\n      value: function timeoutMilliseconds() {\n        var _this4 = this;\n\n        if (!this.stopped && !this.zero) {\n          setTimeout(function () {\n            _this4.nextMillisecond();\n\n            _this4.timeoutMilliseconds();\n          }, 1);\n        }\n      }\n    }, {\n      key: \"timeoutSeconds\",\n      value: function timeoutSeconds() {\n        var _this5 = this;\n\n        if (!this.stopped && !this.zero) {\n          setTimeout(function () {\n            if (!_this5.stopped) {\n              _this5.nextSecond();\n\n              if (!_this5.zero) {\n                _this5.timeoutSeconds();\n              }\n            }\n          }, 1000);\n        }\n      }\n    }, {\n      key: \"nextMillisecond\",\n      value: function nextMillisecond() {\n        if (this.countDown) {\n          this.timeRemainingSubject.next(this.timeRemaining.decrementMillisecond());\n        }\n\n        if (this.countUp) {\n          this.timeElapsedSubject.next(this.timeElapsed.incrementMillisecond());\n        }\n      }\n    }, {\n      key: \"nextSecond\",\n      value: function nextSecond() {\n        if (this.countDown) {\n          this.timeRemainingSubject.next(this.timeRemaining.decrementSecond());\n        }\n\n        if (this.countUp) {\n          this.timeElapsedSubject.next(this.timeElapsed.incrementSecond());\n        }\n      }\n    }]);\n\n    return TimerComponent;\n  }(DumbComponent);\n\n  TimerComponent.ɵfac = function TimerComponent_Factory(t) {\n    return new (t || TimerComponent)();\n  };\n\n  TimerComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TimerComponent,\n    selectors: [[\"iu-timer\"]],\n    inputs: {\n      countUp: \"countUp\",\n      millisecondsAlways: \"millisecondsAlways\",\n      millisecondsUnderMinute: \"millisecondsUnderMinute\",\n      showHours: \"showHours\",\n      countdownFrom: \"countdownFrom\",\n      countDown: \"countDown\"\n    },\n    outputs: {\n      timesUp: \"timesUp\"\n    },\n    features: [i0.ɵɵInheritDefinitionFeature],\n    decls: 7,\n    vars: 2,\n    consts: [[1, \"timer\"], [\"class\", \"time-remaining\", 4, \"ngIf\"], [\"class\", \"time-elapsed\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", 3, \"click\"], [1, \"time-remaining\"], [1, \"time-elapsed\"]],\n    template: function TimerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, TimerComponent_div_1_Template, 3, 5, \"div\", 1);\n        i0.ɵɵtemplate(2, TimerComponent_div_2_Template, 3, 5, \"div\", 2);\n        i0.ɵɵelementStart(3, \"button\", 3);\n        i0.ɵɵlistener(\"click\", function TimerComponent_Template_button_click_3_listener($event) {\n          return ctx.start($event);\n        });\n        i0.ɵɵtext(4, \"Start\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"button\", 3);\n        i0.ɵɵlistener(\"click\", function TimerComponent_Template_button_click_5_listener($event) {\n          return ctx.stop($event);\n        });\n        i0.ɵɵtext(6, \"Stop\");\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.countDown);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.countUp);\n      }\n    },\n    directives: [i1.NgIf, i2.MatButton],\n    pipes: [i3.TimerPipe],\n    styles: [\".timer[_ngcontent-%COMP%]   .time-remaining[_ngcontent-%COMP%], .timer[_ngcontent-%COMP%]   .time-elapsed[_ngcontent-%COMP%]{font-size:48px}\"]\n  });\n  return TimerComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}